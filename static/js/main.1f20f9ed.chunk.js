(this["webpackJsonprate-app"]=this["webpackJsonprate-app"]||[]).push([[0],{119:function(e,t,n){},124:function(e,t,n){},128:function(e,t){},160:function(e,t,n){},161:function(e,t,n){},176:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(19),i=n.n(c),s=(n(160),n(7)),o=(n(161),n(66)),l=n(26),u=n(25),d=n(13),j=n.n(d),b=n(22),f=n(70),h=n(71),p=n(36),O=(n(163),n(164),n(165),{apiKey:"AIzaSyCGMkWMcLZtJMgypTPVUYUmfOtNAw7AxIA",authDomain:"rate-app-7577d.firebaseapp.com",projectId:"rate-app-7577d",storageBucket:"rate-app-7577d.appspot.com",messagingSenderId:"613439669437",appId:"1:613439669437:web:5b34e74f3b443f89b2a3d4"}),x=new(function(){function e(){Object(f.a)(this,e),p.a.apps.length?p.a.app():p.a.initializeApp(O),this.auth=p.a.auth(),this.db=p.a.firestore()}return Object(h.a)(e,[{key:"login",value:function(){var e=Object(b.a)(j.a.mark((function e(t,n){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.auth().signInWithEmailAndPassword(t,n).catch((function(e){return console.log(e),e}));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"signin",value:function(){var e=Object(b.a)(j.a.mark((function e(t,n){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.auth().createUserWithEmailAndPassword(t,n).catch((function(e){return console.log(e),e}));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.auth().signOut().catch((function(e){return console.log(e),e}));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getUserState",value:function(){var e=Object(b.a)(j.a.mark((function e(){var t=this;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){t.auth.onAuthStateChanged(e)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"deleteFilm",value:function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.firestore().collection("Films").doc(t).delete().then((function(){console.log("Document successfully deleted!")})).catch((function(e){console.error("Error removing document: ",e)}));case 2:e.sent;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteSeries",value:function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.firestore().collection("Series").doc(t).delete().then((function(){console.log("Document successfully deleted!")})).catch((function(e){console.error("Error removing document: ",e)}));case 2:e.sent;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getFilms",value:function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,p.a.firestore().collection("Films").where("uid","==",t.uid).get();case 3:return e.sent.forEach((function(e){n.push({id:e.id,data:e.data()})})),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSeries",value:function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,p.a.firestore().collection("Series").where("uid","==",t.uid).get();case 3:return e.sent.forEach((function(e){n.push({id:e.id,data:e.data()})})),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"addFilm",value:function(){var e=Object(b.a)(j.a.mark((function e(t,n){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.firestore().collection("Films").add({uid:t.uid,title:n.title,rating:n.rating}).catch((function(e){return console.log(e),e}));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"addSeries",value:function(){var e=Object(b.a)(j.a.mark((function e(t,n){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.firestore().collection("Series").add({uid:t.uid,title:n.title,rating:n.rating}).catch((function(e){return console.log(e),e}));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}()),g=n(128),v=n(4),m=a.a.createContext(),w={user:{}},y=function(e){var t=a.a.useReducer(g.firebaseAuth,w),n=Object(s.a)(t,2),r={state:n[0],dispatch:n[1]};return Object(v.jsx)(m.Provider,{value:r,children:e.children})},k=n(106),S=(n(119),n(53)),C=n.n(S),F=n(73),A=Object(u.g)((function(){var e=Object(r.useState)(""),t=Object(s.a)(e,2),n=t[0],c=t[1],i=Object(r.useState)(""),d=Object(s.a)(i,2),f=d[0],h=d[1],p=a.a.useContext(m),O=p.state,g=(p.dispatch,Object(r.useState)(!1)),w=Object(s.a)(g,2),y=w[0],S=w[1],A=function(){var e=Object(b.a)(j.a.mark((function e(t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,x.signin(n,f);case 3:(r=e.sent).hasOwnProperty("message")?console.log(r.message):(console.log(r.user),S(!0)),console.log(O.user);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return y?Object(v.jsx)(u.a,{to:"/"}):Object(v.jsxs)(a.a.Fragment,{children:[Object(v.jsx)("div",{id:"goBackIcon",children:Object(v.jsx)(l.b,{to:"/",className:"link",children:Object(v.jsx)(F.a,{children:Object(v.jsx)(C.a,{style:{fill:"white"}})})})}),Object(v.jsxs)("div",{id:"loginContainer",className:"center",children:[Object(v.jsx)("div",{style:{textAlign:"center"},children:Object(v.jsx)(k.a,{label:"Email",placeholder:"Enter email",type:"email",variant:"outlined",onChange:function(e){return c(e.target.value)}})}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{style:{textAlign:"center"},children:Object(v.jsx)(k.a,{id:"standard-password-input",label:"Password",type:"password",variant:"outlined",autoComplete:"current-password",onChange:function(e){return h(e.target.value)}})}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{style:{textAlign:"center"},children:Object(v.jsx)(o.a,{variant:"contained",color:"primary",size:"large",onClick:A,children:"Register"})})]})]})})),E=n(123),N=function(){var e=Object(r.useState)(""),t=Object(s.a)(e,2),n=t[0],c=t[1],i=Object(r.useState)(""),d=Object(s.a)(i,2),f=d[0],h=d[1],p=Object(r.useState)(!1),O=Object(s.a)(p,2),g=O[0],m=O[1],w=function(){var e=Object(b.a)(j.a.mark((function e(t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,x.login(n,f);case 3:r=e.sent,console.log(r),m(!0);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if(g)return Object(v.jsx)(u.a,{to:"/"});Object(E.a)((function(e){return{root:{"& .MuiTextField-root":{margin:e.spacing(1),width:"25ch"}}}}));return Object(v.jsxs)(a.a.Fragment,{children:[Object(v.jsx)("div",{id:"goBackIcon",children:Object(v.jsx)(l.b,{to:"/",className:"link",children:Object(v.jsx)(F.a,{children:Object(v.jsx)(C.a,{style:{fill:"white"}})})})}),Object(v.jsxs)("div",{id:"loginContainer",className:"center",children:[Object(v.jsx)("div",{style:{textAlign:"center"},children:Object(v.jsx)(k.a,{label:"Email",placeholder:"Enter email",type:"email",variant:"outlined",onChange:function(e){return c(e.target.value)}})}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{style:{textAlign:"center"},children:Object(v.jsx)(k.a,{id:"standard-password-input",label:"Password",type:"password",variant:"outlined",autoComplete:"current-password",onChange:function(e){return h(e.target.value)}})}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{style:{textAlign:"center"},children:Object(v.jsx)(o.a,{variant:"contained",color:"primary",size:"large",onClick:w,children:"Login"})})]})]})},z=function(e){var t=Object(r.useState)(""),n=Object(s.a)(t,2),c=n[0],i=n[1],o=Object(r.useState)(""),l=Object(s.a)(o,2),u=l[0],d=l[1],f=Object(r.useState)(!1),h=Object(s.a)(f,2),p=(h[0],h[1]),O=Object(r.useState)(null),g=Object(s.a)(O,2),m=g[0],w=g[1];Object(r.useEffect)((function(){x.getUserState().then((function(e){e&&w(e)}))}));var y,k=function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={title:c,rating:u},e.next=4,x.createPost(m,n).then((function(){console.log("Success"),p(!0)})).catch((function(e){console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.getPosts(m).catch((function(e){console.log(e)}));case 2:n=e.sent,console.log("Films",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return y=Object(v.jsxs)("form",{onSubmit:k,children:[Object(v.jsx)("p",{children:"Add new film"}),Object(v.jsx)("label",{htmlFor:"title",children:"Film title:"}),Object(v.jsx)("input",{type:"text",name:"title",onChange:function(e){return i(e.target.value)}}),Object(v.jsx)("label",{htmlFor:"rating",children:"Film rating:"}),Object(v.jsx)("input",{type:"number",name:"rating",onChange:function(e){return d(e.target.value)}}),Object(v.jsx)("input",{type:"submit"})]}),Object(v.jsxs)(a.a.Fragment,{children:[y,Object(v.jsx)("button",{onClick:S,children:"Check films"})]})},B=n(90),I=(n(124),n(89)),D=n.n(I),P=[{field:"titleField",headerName:"Title",width:380,disableClickEventBubbling:!0},{field:"ratingField",headerName:"Rating",width:150,disableClickEventBubbling:!0},{field:"deleteField",headerName:"Delete",sortable:!1,width:100,disableClickEventBubbling:!0,renderCell:function(e){return Object(v.jsx)(F.a,{children:Object(v.jsx)(D.a,{})})}}],R=function(e){var t=Object(r.useState)(""),n=Object(s.a)(t,2),c=n[0],i=n[1],u=Object(r.useState)(""),d=Object(s.a)(u,2),f=d[0],h=d[1],p=Object(r.useState)(!1),O=Object(s.a)(p,2),g=(O[0],O[1],Object(r.useState)(null)),m=Object(s.a)(g,2),w=m[0],y=m[1],S=Object(r.useState)([{id:"",titleField:"",ratingField:""}]),A=Object(s.a)(S,2),E=A[0],N=A[1],z=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.getFilms(t).catch((function(e){console.log(e)}));case 2:n=e.sent,console.log(n),r=[],n.forEach((function(e){r.push({id:e.id,titleField:e.data.title,ratingField:e.data.rating})})),console.log(r),N(r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){var e=x.auth.onAuthStateChanged(function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t?(y(t),z(t)):(console.log("User not logged"),y(null));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return function(){return e()}}),[]);var I=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("delete",t),e.next=3,x.deleteFilm(t).then((function(){console.log("Success"),z(w)})).catch((function(e){console.log(e)}));case 3:z(w);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={title:c,rating:f},e.next=4,x.addFilm(w,n).then((function(){console.log("Success"),z(w)})).catch((function(e){console.log(e)}));case 4:h(""),i("");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsxs)(a.a.Fragment,{children:[Object(v.jsx)("div",{id:"goBackIcon",children:Object(v.jsx)(l.b,{to:"/",className:"link",children:Object(v.jsx)(F.a,{children:Object(v.jsx)(C.a,{style:{fill:"white"}})})})}),Object(v.jsxs)("div",{id:"addFilmContainer",className:"center-h",children:[Object(v.jsx)("div",{style:{textAlign:"center"},children:Object(v.jsx)(k.a,{label:"Film title",placeholder:"Title",variant:"outlined",value:c,onChange:function(e){return i(e.target.value)}})}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{style:{textAlign:"center"},children:Object(v.jsx)(k.a,{label:"Film rating",placeholder:"Rating",variant:"outlined",value:f,onChange:function(e){return h(e.target.value)}})}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{style:{textAlign:"center"},children:Object(v.jsx)(o.a,{variant:"contained",color:"primary",size:"large",onClick:D,children:"Add film"})})]}),Object(v.jsx)("div",{id:"filmTableContainer",className:"center",children:Object(v.jsx)(B.a,{rows:E,columns:P,pageSize:10,checkboxSelection:!0,disableSelectionOnClick:!0,onCellClick:function(e,t){"__check__"!==e.field&&("deleteField"!==e.field||I(e.row.id))}})})]})},T=[{field:"titleField",headerName:"Title",width:380,disableClickEventBubbling:!0},{field:"ratingField",headerName:"Rating",width:150,disableClickEventBubbling:!0},{field:"deleteField",headerName:"Delete",sortable:!1,width:100,disableClickEventBubbling:!0,renderCell:function(e){return Object(v.jsx)(F.a,{children:Object(v.jsx)(D.a,{})})}}],U=function(e){var t=Object(r.useState)(""),n=Object(s.a)(t,2),c=n[0],i=n[1],u=Object(r.useState)(""),d=Object(s.a)(u,2),f=d[0],h=d[1],p=Object(r.useState)(!1),O=Object(s.a)(p,2),g=(O[0],O[1],Object(r.useState)(null)),m=Object(s.a)(g,2),w=m[0],y=m[1],S=Object(r.useState)([{id:"",titleField:"",ratingField:""}]),A=Object(s.a)(S,2),E=A[0],N=A[1],z=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.getSeries(t).catch((function(e){console.log(e)}));case 2:n=e.sent,console.log(n),r=[],n.forEach((function(e){r.push({id:e.id,titleField:e.data.title,ratingField:e.data.rating})})),console.log(r),N(r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){var e=x.auth.onAuthStateChanged(function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t?(y(t),z(t)):(console.log("User not logged"),y(null));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return function(){return e()}}),[]);var I=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("delete",t),e.next=3,x.deleteSeries(t).then((function(){console.log("Success"),z(w)})).catch((function(e){console.log(e)}));case 3:z(w);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={title:c,rating:f},e.next=4,x.addSeries(w,n).then((function(){console.log("Success"),z(w)})).catch((function(e){console.log(e)}));case 4:h(""),i("");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsxs)(a.a.Fragment,{children:[Object(v.jsx)("div",{id:"goBackIcon",children:Object(v.jsx)(l.b,{to:"/",className:"link",children:Object(v.jsx)(F.a,{children:Object(v.jsx)(C.a,{style:{fill:"white"}})})})}),Object(v.jsxs)("div",{id:"addFilmContainer",className:"center-h",children:[Object(v.jsx)("div",{style:{textAlign:"center"},children:Object(v.jsx)(k.a,{label:"Series title",placeholder:"Title",variant:"outlined",value:c,onChange:function(e){return i(e.target.value)}})}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{style:{textAlign:"center"},children:Object(v.jsx)(k.a,{label:"Series rating",placeholder:"Rating",variant:"outlined",value:f,onChange:function(e){return h(e.target.value)}})}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{style:{textAlign:"center"},children:Object(v.jsx)(o.a,{variant:"contained",color:"primary",size:"large",onClick:D,children:"Add series"})})]}),Object(v.jsx)("div",{id:"filmTableContainer",className:"center",children:Object(v.jsx)(B.a,{rows:E,columns:T,pageSize:10,checkboxSelection:!0,disableSelectionOnClick:!0,onCellClick:function(e,t){"__check__"!==e.field&&("deleteField"!==e.field||I(e.row.id))}})})]})},_=function(){return Object(v.jsxs)(u.d,{children:[Object(v.jsx)(u.b,{exact:!0,path:"/register",component:A}),Object(v.jsx)(u.b,{exact:!0,path:"/login",component:N}),Object(v.jsx)(u.b,{exact:!0,path:"/create",component:z}),Object(v.jsx)(u.b,{exact:!0,path:"/rate-films",component:R}),Object(v.jsx)(u.b,{exact:!0,path:"/rate-series",component:U})]})};var M=function(){var e=Object(r.useState)(null),t=Object(s.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),i=Object(s.a)(c,2),d=i[0],j=i[1];return Object(r.useEffect)((function(){var e=x.auth.onAuthStateChanged((function(e){e?a(e):(console.log("User not logged"),a(null))}));return function(){return e()}}),[]),n?Object(v.jsx)(l.a,{basename:"/",children:Object(v.jsxs)("div",{id:"appContainer",children:[Object(v.jsx)(u.d,{children:Object(v.jsxs)(u.b,{exact:!0,path:"/",children:[d,Object(v.jsxs)("div",{id:"menu",className:"center",children:[Object(v.jsx)(l.b,{to:"/rate-films",className:"link",children:Object(v.jsx)(o.a,{variant:"contained",color:"primary",size:"large",children:"Rate films"})}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)(l.b,{to:"/rate-series",className:"link",children:Object(v.jsx)(o.a,{variant:"contained",color:"primary",size:"large",children:"Rate series"})}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)(o.a,{variant:"contained",color:"primary",size:"large",onClick:function(){x.logout(),a(null),j("")},children:"Log out"})]})]})}),Object(v.jsx)(_,{})]})}):Object(v.jsx)(l.a,{basename:"/pro-int-web",children:Object(v.jsxs)("div",{id:"appContainer",children:[Object(v.jsx)(u.d,{children:Object(v.jsxs)(u.b,{exact:!0,path:"/",children:[d,Object(v.jsxs)("div",{id:"menu",className:"center",children:[Object(v.jsx)(l.b,{to:"/login",className:"link",children:Object(v.jsx)(o.a,{variant:"contained",color:"primary",size:"large",children:"Login"})}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)(l.b,{to:"/register",className:"link",children:Object(v.jsx)(o.a,{variant:"contained",color:"primary",size:"large",children:"Register"})})]})]})}),Object(v.jsx)(_,{})]})})};n(175);i.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsx)(l.a,{children:Object(v.jsx)(y,{children:Object(v.jsx)(M,{})})})}),document.getElementById("root"))}},[[176,1,2]]]);
//# sourceMappingURL=main.1f20f9ed.chunk.js.map